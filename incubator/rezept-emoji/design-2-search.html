<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emoji-Picker â€” Bottom-Sheet mit Suche</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  /* ===== Theme Variables ===== */
  [data-theme="dark"] {
    --body-bg: #0a0a0e;
    --screen-bg: #121216;
    --screen-gradient: none;
    --surface: rgba(255,255,255,0.04);
    --surface-hover: rgba(255,255,255,0.06);
    --surface-border: rgba(255,255,255,0.06);
    --teal: #4E9DA6;
    --orange: #E8923A;
    --text-primary: #ffffff;
    --text-secondary: rgba(255,255,255,0.5);
    --text-dim: rgba(255,255,255,0.35);
    --card-bg: rgba(255,255,255,0.03);
    --card-border: rgba(255,255,255,0.06);
    --card-blur: 0px;
    --chip-bg: rgba(255,255,255,0.06);
    --chip-border: rgba(255,255,255,0.08);
    --chip-blur: 0px;
    --frame-shadow: 0 0 60px rgba(0,0,0,0.5), 0 0 120px rgba(78,157,166,0.05);
    --frame-border: 1px solid rgba(255,255,255,0.08);
    --icon-radius: 50%;
    --sheet-bg: #1a1a20;
    --input-bg: rgba(255,255,255,0.06);
  }

  [data-theme="glass"] {
    --body-bg: #1a1a2e;
    --screen-bg: #0a0a12;
    --screen-gradient:
      radial-gradient(ellipse at 20% 80%, rgba(120, 50, 180, 0.35) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, rgba(50, 120, 180, 0.3) 0%, transparent 60%),
      radial-gradient(ellipse at 50% 50%, rgba(180, 50, 120, 0.2) 0%, transparent 60%),
      radial-gradient(ellipse at 10% 20%, rgba(139, 92, 246, 0.2) 0%, transparent 50%),
      radial-gradient(ellipse at 90% 80%, rgba(59, 130, 246, 0.18) 0%, transparent 50%);
    --surface: rgba(255,255,255,0.06);
    --surface-hover: rgba(255,255,255,0.09);
    --surface-border: rgba(255,255,255,0.1);
    --teal: #4E9DA6;
    --orange: #E8923A;
    --text-primary: #ffffff;
    --text-secondary: rgba(255,255,255,0.5);
    --text-dim: rgba(255,255,255,0.35);
    --card-bg: rgba(255,255,255,0.06);
    --card-border: rgba(255,255,255,0.1);
    --card-blur: blur(20px);
    --chip-bg: rgba(255,255,255,0.06);
    --chip-border: rgba(255,255,255,0.08);
    --chip-blur: blur(12px);
    --frame-shadow: 0 0 0 2px rgba(255,255,255,0.08), 0 40px 80px rgba(0,0,0,0.6), 0 0 120px rgba(139,92,246,0.15), 0 0 80px rgba(236,72,153,0.1);
    --frame-border: none;
    --icon-radius: 14px;
    --sheet-bg: rgba(20,20,35,0.95);
    --input-bg: rgba(255,255,255,0.08);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    background: var(--body-bg);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    font-family: 'Plus Jakarta Sans', -apple-system, sans-serif;
    color: var(--text-primary);
  }

  .phone-frame {
    width: 390px;
    height: 844px;
    background: var(--screen-bg);
    border-radius: 44px;
    overflow: hidden;
    position: relative;
    border: var(--frame-border);
    box-shadow: var(--frame-shadow);
  }

  .screen {
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    padding-bottom: 40px;
    scrollbar-width: none;
    background-color: var(--screen-bg);
    background-image: var(--screen-gradient);
  }
  .screen::-webkit-scrollbar { display: none; }

  /* ===== Status Bar ===== */
  .status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 28px 8px;
    position: sticky;
    top: 0;
    z-index: 50;
    background: var(--screen-bg);
  }
  .status-time { font-size: 15px; font-weight: 700; letter-spacing: 0.5px; }
  .status-icons { display: flex; align-items: center; gap: 6px; }
  .status-icons svg { width: 16px; height: 16px; fill: white; }

  .theme-toggle {
    width: 20px; height: 20px; background: transparent; border: none;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    opacity: 0.5; padding: 0; margin: 0 6px;
  }
  .theme-toggle:hover { opacity: 0.85; }
  .theme-toggle svg { width: 16px; height: 16px; fill: white; }

  /* ===== Header ===== */
  .header {
    padding: 8px 20px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .nav-back {
    display: flex; align-items: center; gap: 6px;
    background: none; border: none; color: var(--teal);
    font-size: 15px; font-weight: 600; cursor: pointer;
    font-family: inherit; text-decoration: none;
  }
  .nav-back svg { width: 20px; height: 20px; fill: var(--teal); }
  .header-title { font-size: 17px; font-weight: 700; letter-spacing: -0.2px; }
  .header-spacer { width: 80px; }

  /* ===== Recipe Hero ===== */
  .recipe-hero {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 20px 20px;
  }

  .emoji-circle {
    width: 96px;
    height: 96px;
    border-radius: var(--icon-radius);
    background: var(--surface);
    border: 1px solid var(--surface-border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 72px;
    line-height: 1;
    margin-bottom: 14px;
    backdrop-filter: var(--chip-blur);
    cursor: pointer;
    position: relative;
    transition: background 0.3s ease, border-radius 0.3s ease, transform 0.2s ease;
  }
  .emoji-circle:hover { transform: scale(1.05); }
  .emoji-circle::after {
    content: '';
    position: absolute;
    bottom: -2px; right: -2px;
    width: 28px; height: 28px;
    border-radius: 50%;
    background: var(--teal);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z'/%3E%3C/svg%3E");
    background-size: 14px;
    background-repeat: no-repeat;
    background-position: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }

  .recipe-name {
    font-size: 24px; font-weight: 800; text-align: center;
    letter-spacing: -0.3px; margin-bottom: 12px;
  }

  /* ===== Meta Chips ===== */
  .meta-chips {
    display: flex; gap: 8px; justify-content: center; margin-bottom: 20px;
  }
  .chip {
    background: var(--chip-bg); border: 1px solid var(--chip-border);
    border-radius: 16px; padding: 7px 14px; font-size: 12px;
    font-weight: 600; color: var(--text-secondary);
    backdrop-filter: var(--chip-blur);
  }

  /* ===== Bottom Sheet Overlay ===== */
  .sheet-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    z-index: 90;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  .sheet-overlay.active {
    opacity: 1;
    pointer-events: auto;
  }

  /* ===== Bottom Sheet ===== */
  .bottom-sheet {
    position: absolute;
    left: 0; right: 0; bottom: 0;
    z-index: 100;
    background: var(--sheet-bg);
    border-radius: 28px 28px 0 0;
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border-top: 1px solid var(--surface-border);
    transform: translateY(100%);
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    max-height: 75%;
    display: flex;
    flex-direction: column;
  }
  .bottom-sheet.active { transform: translateY(0); }

  .sheet-handle {
    width: 36px; height: 4px; border-radius: 2px;
    background: rgba(255,255,255,0.2);
    margin: 10px auto 0; flex-shrink: 0;
  }

  .sheet-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px 20px 12px; flex-shrink: 0;
  }
  .sheet-title { font-size: 18px; font-weight: 700; }
  .sheet-close {
    width: 32px; height: 32px; border-radius: 50%;
    background: var(--surface); border: 1px solid var(--surface-border);
    color: var(--text-secondary); font-size: 18px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
  }

  /* ===== Search ===== */
  .sheet-search {
    padding: 0 20px 12px;
    flex-shrink: 0;
  }
  .search-input {
    width: 100%;
    padding: 10px 14px 10px 38px;
    border-radius: 14px;
    background: var(--input-bg);
    border: 1px solid var(--surface-border);
    color: var(--text-primary);
    font-size: 14px;
    font-weight: 500;
    font-family: inherit;
    outline: none;
    transition: border-color 0.2s ease;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='rgba(255,255,255,0.3)'%3E%3Cpath d='M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'/%3E%3C/svg%3E");
    background-size: 18px;
    background-repeat: no-repeat;
    background-position: 12px center;
  }
  .search-input::placeholder { color: var(--text-dim); }
  .search-input:focus { border-color: var(--teal); }

  /* ===== Category Pill Tabs ===== */
  .pill-tabs {
    display: flex; gap: 6px; padding: 0 20px 14px;
    overflow-x: auto; scrollbar-width: none; flex-shrink: 0;
  }
  .pill-tabs::-webkit-scrollbar { display: none; }

  .pill-tab {
    flex-shrink: 0; padding: 7px 14px; font-size: 12px; font-weight: 600;
    color: var(--text-dim); background: var(--surface);
    border: 1px solid var(--surface-border); border-radius: 20px;
    cursor: pointer; font-family: inherit; transition: all 0.2s ease; white-space: nowrap;
  }
  .pill-tab:hover { color: var(--text-secondary); background: var(--surface-hover); }
  .pill-tab.active { color: #fff; background: var(--teal); border-color: var(--teal); }

  /* ===== Sheet Emoji Grid ===== */
  .sheet-scroll {
    flex: 1; overflow-y: auto; padding: 0 20px 30px; scrollbar-width: none;
  }
  .sheet-scroll::-webkit-scrollbar { display: none; }

  .sheet-cat-label {
    font-size: 11px; font-weight: 600; color: var(--text-dim);
    text-transform: uppercase; letter-spacing: 1px;
    margin-bottom: 10px; margin-top: 16px;
  }
  .sheet-cat-label:first-child { margin-top: 0; }

  .sheet-grid {
    display: grid; grid-template-columns: repeat(6, 1fr); gap: 6px;
  }

  .sheet-emoji {
    aspect-ratio: 1; border: 2px solid transparent; border-radius: 14px;
    background: transparent; font-size: 28px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: background 0.15s ease, border-color 0.15s ease, transform 0.1s ease;
    padding: 0;
  }
  .sheet-emoji:hover { background: var(--surface-hover); transform: scale(1.12); }
  .sheet-emoji:active { transform: scale(0.92); }
  .sheet-emoji.selected {
    border-color: var(--teal);
    background: rgba(78,157,166,0.15);
    box-shadow: 0 0 12px rgba(78,157,166,0.2);
  }

  .no-results {
    text-align: center;
    padding: 32px 20px;
    color: var(--text-dim);
    font-size: 14px;
    font-weight: 500;
    display: none;
  }

  /* ===== Filler content ===== */
  .placeholder-section { padding: 0 20px; margin-bottom: 24px; }
  .section-label {
    font-size: 12px; font-weight: 600; color: var(--text-dim);
    text-transform: uppercase; letter-spacing: 1.2px;
    padding: 0 20px; margin-bottom: 10px;
  }
  .card {
    border-radius: 22px; background: var(--card-bg);
    border: 1px solid var(--card-border);
    backdrop-filter: var(--card-blur); overflow: hidden;
  }
  .ingredient-row {
    display: flex; align-items: center; padding: 14px 18px; gap: 12px;
  }
  .ingredient-row + .ingredient-row { border-top: 1px solid var(--surface-border); }
  .ingredient-qty { font-size: 14px; font-weight: 700; color: var(--teal); min-width: 70px; }
  .ingredient-name { font-size: 14px; font-weight: 500; flex: 1; }
</style>
</head>
<body>

<div class="phone-frame">
  <div class="screen">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-time">9:41</div>
      <div class="status-icons">
        <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle theme"></button>
        <svg viewBox="0 0 16 16"><path d="M1.5 4.5C4 2 7.5 1 8 1s4 1 6.5 3.5l-1.2 1.2C11.2 3.6 9 2.5 8 2.5S4.8 3.6 2.7 5.7L1.5 4.5zM4 7.3C5.3 6 6.8 5.2 8 5.2s2.7.8 4 2.1L10.8 8.5C9.8 7.5 9 7 8 7s-1.8.5-2.8 1.5L4 7.3zM6.5 10c.8-.8 1.2-1 1.5-1s.7.2 1.5 1L8 11.5 6.5 10z"/></svg>
        <svg viewBox="0 0 16 16"><path d="M1 4h2v8H1V4zm3.5 2h2v6h-2V6zM8 3h2v9H8V3zm3.5 1h2v8h-2V4z"/></svg>
        <svg viewBox="0 0 24 14"><rect x="0.5" y="0.5" width="20" height="13" rx="2.5" stroke="white" stroke-opacity="0.35" fill="none"/><path opacity="0.4" d="M22 5v4a2 2 0 000-4z" fill="white"/><rect x="2" y="2" width="15" height="9" rx="1.5" fill="white"/></svg>
      </div>
    </div>

    <!-- Header -->
    <div class="header">
      <a class="nav-back" href="#">
        <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
        Rezepte
      </a>
      <span class="header-title">Rezept</span>
      <span class="header-spacer"></span>
    </div>

    <!-- Recipe Hero -->
    <div class="recipe-hero">
      <div class="emoji-circle" id="emojiCircle" onclick="openSheet()">ğŸ</div>
      <h1 class="recipe-name">Spaghetti Bolognese</h1>
    </div>

    <!-- Meta Chips -->
    <div class="meta-chips">
      <span class="chip">4 Portionen</span>
      <span class="chip">30 Min</span>
    </div>

    <!-- Zutaten (Filler) -->
    <div class="placeholder-section">
      <div class="section-label">Zutaten</div>
      <div class="card">
        <div class="ingredient-row">
          <span class="ingredient-qty">500 g</span>
          <span class="ingredient-name">Spaghetti</span>
        </div>
        <div class="ingredient-row">
          <span class="ingredient-qty">400 g</span>
          <span class="ingredient-name">Hackfleisch</span>
        </div>
        <div class="ingredient-row">
          <span class="ingredient-qty">2</span>
          <span class="ingredient-name">Zwiebeln</span>
        </div>
        <div class="ingredient-row">
          <span class="ingredient-qty">400 ml</span>
          <span class="ingredient-name">Passierte Tomaten</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay -->
  <div class="sheet-overlay" id="sheetOverlay" onclick="closeSheet()"></div>

  <!-- Bottom Sheet -->
  <div class="bottom-sheet" id="bottomSheet">
    <div class="sheet-handle"></div>
    <div class="sheet-header">
      <span class="sheet-title">Icon wÃ¤hlen</span>
      <button class="sheet-close" onclick="closeSheet()">âœ•</button>
    </div>
    <div class="sheet-search">
      <input class="search-input" id="searchInput" type="text" placeholder="Suchenâ€¦ z.B. Pizza, Curry" oninput="filterEmojis()">
    </div>
    <div class="pill-tabs" id="pillTabs"></div>
    <div class="sheet-scroll" id="sheetScroll"></div>
    <div class="no-results" id="noResults">Kein passendes Icon gefunden</div>
  </div>
</div>

<script>
  // ===== Theme =====
  var MOON_SVG = '<svg viewBox="0 0 24 24" fill="white"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>';
  var SUN_SVG = '<svg viewBox="0 0 24 24" fill="white"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"/></svg>';
  function getTheme() { return localStorage.getItem('shopzebra_theme') || 'dark'; }
  function applyTheme(t) {
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('shopzebra_theme', t);
    document.getElementById('themeToggle').innerHTML = t === 'dark' ? MOON_SVG : SUN_SVG;
  }
  function toggleTheme() { applyTheme(getTheme() === 'dark' ? 'glass' : 'dark'); }
  applyTheme(getTheme());

  // ===== Emoji Data with search keywords =====
  var CATEGORIES = {
    'Gerichte': [
      { e:'ğŸ', k:'pasta spaghetti nudeln' },
      { e:'ğŸ›', k:'curry reis' },
      { e:'ğŸ²', k:'eintopf suppe topf' },
      { e:'ğŸ¥˜', k:'pfanne schmortopf paella' },
      { e:'ğŸœ', k:'ramen nudelsuppe asiatisch' },
      { e:'ğŸ«•', k:'fondue kÃ¤se' },
      { e:'ğŸ¥£', k:'mÃ¼sli bowl schÃ¼ssel porridge' },
      { e:'ğŸ±', k:'bento japanisch' },
      { e:'ğŸš', k:'reis schale' },
      { e:'ğŸ™', k:'onigiri reisbÃ¤llchen' },
      { e:'ğŸ˜', k:'reiskuchen' },
    ],
    'Fast Food': [
      { e:'ğŸ•', k:'pizza' },
      { e:'ğŸ”', k:'burger hamburger' },
      { e:'ğŸŒ­', k:'hotdog wÃ¼rstchen' },
      { e:'ğŸŸ', k:'pommes frites' },
      { e:'ğŸ¥ª', k:'sandwich brot' },
      { e:'ğŸŒ®', k:'taco mexikanisch' },
      { e:'ğŸŒ¯', k:'burrito wrap' },
      { e:'ğŸ¥™', k:'pita dÃ¶ner kebab falafel' },
      { e:'ğŸ§†', k:'falafel bÃ¤llchen' },
      { e:'ğŸ¥Ÿ', k:'dumpling maultasche' },
      { e:'ğŸ¥ ', k:'glÃ¼ckskeks' },
    ],
    'Fleisch & Fisch': [
      { e:'ğŸ—', k:'hÃ¤hnchen huhn keule' },
      { e:'ğŸ–', k:'fleisch knochen rippe' },
      { e:'ğŸ¥©', k:'steak rind fleisch' },
      { e:'ğŸ¥“', k:'speck bacon' },
      { e:'ğŸ£', k:'sushi lachs fisch' },
      { e:'ğŸ¤', k:'garnele shrimp' },
      { e:'ğŸŸ', k:'fisch lachs forelle' },
      { e:'ğŸ³', k:'ei spiegelei bratei' },
      { e:'ğŸ¥š', k:'ei' },
    ],
    'Obst': [
      { e:'ğŸ', k:'apfel rot' },
      { e:'ğŸ', k:'birne' },
      { e:'ğŸŠ', k:'orange mandarine' },
      { e:'ğŸ‹', k:'zitrone' },
      { e:'ğŸŒ', k:'banane' },
      { e:'ğŸ‰', k:'wassermelone melone' },
      { e:'ğŸ‡', k:'trauben weintrauben' },
      { e:'ğŸ“', k:'erdbeere' },
      { e:'ğŸ«', k:'blaubeere heidelbeere' },
      { e:'ğŸ’', k:'kirsche' },
      { e:'ğŸ‘', k:'pfirsich' },
      { e:'ğŸ¥­', k:'mango' },
      { e:'ğŸ', k:'ananas' },
      { e:'ğŸ¥', k:'kiwi' },
      { e:'ğŸ¥¥', k:'kokosnuss kokos' },
    ],
    'GemÃ¼se': [
      { e:'ğŸ¥•', k:'mÃ¶hre karotte' },
      { e:'ğŸŒ½', k:'mais' },
      { e:'ğŸ¥¦', k:'brokkoli' },
      { e:'ğŸ¥¬', k:'salat blattgemÃ¼se' },
      { e:'ğŸ¥’', k:'gurke' },
      { e:'ğŸ†', k:'aubergine' },
      { e:'ğŸ«‘', k:'paprika' },
      { e:'ğŸŒ¶ï¸', k:'chili scharf' },
      { e:'ğŸ…', k:'tomate' },
      { e:'ğŸ¥‘', k:'avocado' },
      { e:'ğŸ§„', k:'knoblauch' },
      { e:'ğŸ§…', k:'zwiebel' },
      { e:'ğŸ„', k:'pilz champignon' },
      { e:'ğŸ¥”', k:'kartoffel' },
    ],
    'Brot & GebÃ¤ck': [
      { e:'ğŸ', k:'brot toast' },
      { e:'ğŸ¥', k:'croissant' },
      { e:'ğŸ¥–', k:'baguette' },
      { e:'ğŸ¥¨', k:'brezel' },
      { e:'ğŸ¥¯', k:'bagel' },
      { e:'ğŸ§‡', k:'waffel' },
      { e:'ğŸ¥', k:'pancake pfannkuchen' },
      { e:'ğŸ§€', k:'kÃ¤se' },
    ],
    'SÃ¼ÃŸes': [
      { e:'ğŸ§', k:'cupcake muffin' },
      { e:'ğŸ°', k:'kuchen torte' },
      { e:'ğŸ‚', k:'geburtstagskuchen torte' },
      { e:'ğŸ¥§', k:'pie kuchen' },
      { e:'ğŸ©', k:'donut' },
      { e:'ğŸª', k:'keks cookie' },
      { e:'ğŸ«', k:'schokolade' },
      { e:'ğŸ¬', k:'bonbon' },
      { e:'ğŸ­', k:'lolli lollipop' },
      { e:'ğŸ®', k:'pudding' },
      { e:'ğŸ¯', k:'honig' },
      { e:'ğŸ¦', k:'eis eiscreme' },
      { e:'ğŸ¨', k:'eis becher' },
    ],
    'GetrÃ¤nke': [
      { e:'â˜•', k:'kaffee' },
      { e:'ğŸµ', k:'tee' },
      { e:'ğŸ¥›', k:'milch' },
      { e:'ğŸ§‹', k:'bubble tea boba' },
      { e:'ğŸ¥¤', k:'limo softdrink' },
      { e:'ğŸº', k:'bier' },
      { e:'ğŸ·', k:'wein rotwein' },
      { e:'ğŸ§ƒ', k:'saft' },
    ],
  };

  var selectedEmoji = 'ğŸ';
  var activeCategory = 'Gerichte';

  function buildSheet() {
    var catNames = Object.keys(CATEGORIES);
    var pillsHtml = '';
    for (var c = 0; c < catNames.length; c++) {
      var cat = catNames[c];
      var active = cat === activeCategory ? ' active' : '';
      pillsHtml += '<button class="pill-tab' + active + '" data-cat="' + cat + '" onclick="filterCategory(\'' + cat + '\')">' + cat + '</button>';
    }
    document.getElementById('pillTabs').innerHTML = pillsHtml;
    renderGrid('');
  }

  function renderGrid(query) {
    var catNames = Object.keys(CATEGORIES);
    var html = '';
    var totalMatches = 0;
    query = (query || '').toLowerCase().trim();

    for (var c = 0; c < catNames.length; c++) {
      var cat = catNames[c];
      var items = CATEGORIES[cat];
      var matched = [];

      for (var i = 0; i < items.length; i++) {
        if (!query || items[i].k.indexOf(query) !== -1 || cat.toLowerCase().indexOf(query) !== -1) {
          matched.push(items[i]);
        }
      }

      if (matched.length === 0) continue;
      totalMatches += matched.length;

      html += '<div class="sheet-cat-label" id="sheet-cat-' + c + '">' + cat + '</div>';
      html += '<div class="sheet-grid">';
      for (var j = 0; j < matched.length; j++) {
        var sel = matched[j].e === selectedEmoji ? ' selected' : '';
        html += '<button class="sheet-emoji' + sel + '" onclick="pickEmoji(this, \'' + matched[j].e + '\')">' + matched[j].e + '</button>';
      }
      html += '</div>';
    }

    document.getElementById('sheetScroll').innerHTML = html;
    document.getElementById('noResults').style.display = totalMatches === 0 ? 'block' : 'none';

    // Hide pills when searching
    document.getElementById('pillTabs').style.display = query ? 'none' : 'flex';
  }

  function filterEmojis() {
    var query = document.getElementById('searchInput').value;
    renderGrid(query);
  }

  function filterCategory(cat) {
    activeCategory = cat;
    var pills = document.querySelectorAll('.pill-tab');
    for (var i = 0; i < pills.length; i++) {
      pills[i].classList.toggle('active', pills[i].getAttribute('data-cat') === cat);
    }
    var catNames = Object.keys(CATEGORIES);
    var idx = catNames.indexOf(cat);
    var el = document.getElementById('sheet-cat-' + idx);
    if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  function openSheet() {
    document.getElementById('searchInput').value = '';
    buildSheet();
    document.getElementById('bottomSheet').classList.add('active');
    document.getElementById('sheetOverlay').classList.add('active');
    // Focus search after animation
    setTimeout(function() {
      document.getElementById('searchInput').focus();
    }, 350);
  }

  function closeSheet() {
    document.getElementById('bottomSheet').classList.remove('active');
    document.getElementById('sheetOverlay').classList.remove('active');
  }

  function pickEmoji(btn, emoji) {
    selectedEmoji = emoji;
    document.getElementById('emojiCircle').textContent = emoji;
    var allBtns = document.querySelectorAll('.sheet-emoji');
    for (var i = 0; i < allBtns.length; i++) allBtns[i].classList.remove('selected');
    btn.classList.add('selected');
    setTimeout(closeSheet, 250);
  }
</script>

</body>
</html>
