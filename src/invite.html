<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShopZebra - Mitglieder (Design 2: Tab Toggle)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  /* ========================================
     Design 2: Tab/Segment Toggle
     Segmented control switching between
     "Mitglieder" and "Einladen" views.
     Each view uses full screen space.
     ======================================== */

  /* ===== Theme: Dark ===== */
  [data-theme="dark"] {
    --body-bg: #0a0a0e;
    --screen-bg: #121216;
    --screen-gradient: none;
    --surface: rgba(255,255,255,0.04);
    --surface-hover: rgba(255,255,255,0.06);
    --surface-border: rgba(255,255,255,0.06);
    --teal: #4E9DA6;
    --orange: #E8923A;
    --text-primary: #ffffff;
    --text-secondary: rgba(255,255,255,0.5);
    --text-dim: rgba(255,255,255,0.35);
    --card-bg: rgba(255,255,255,0.03);
    --card-border: rgba(255,255,255,0.06);
    --card-blur: 0px;
    --input-bg: rgba(255,255,255,0.04);
    --input-border: rgba(255,255,255,0.08);
    --input-focus: rgba(78,157,166,0.3);
    --frame-shadow: 0 0 60px rgba(0,0,0,0.5), 0 0 120px rgba(78,157,166,0.05);
    --frame-border: 1px solid rgba(255,255,255,0.08);
    --icon-radius: 50%;
    --qr-bg: #ffffff;
    --qr-shadow: 0 0 30px rgba(255,255,255,0.05);
    --success-bg: rgba(107,191,107,0.12);
    --success-color: #6BBF6B;
    --danger-color: #E07B7B;
    --danger-bg: rgba(224,123,123,0.12);
    --segment-bg: rgba(255,255,255,0.04);
    --segment-active: rgba(255,255,255,0.1);
  }

  /* ===== Theme: Glass ===== */
  [data-theme="glass"] {
    --body-bg: #1a1a2e;
    --screen-bg: #0a0a12;
    --screen-gradient:
      radial-gradient(ellipse at 20% 80%, rgba(120, 50, 180, 0.35) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, rgba(50, 120, 180, 0.3) 0%, transparent 60%),
      radial-gradient(ellipse at 50% 50%, rgba(180, 50, 120, 0.2) 0%, transparent 60%);
    --surface: rgba(255,255,255,0.06);
    --surface-hover: rgba(255,255,255,0.09);
    --surface-border: rgba(255,255,255,0.1);
    --teal: #4E9DA6;
    --orange: #E8923A;
    --text-primary: #ffffff;
    --text-secondary: rgba(255,255,255,0.5);
    --text-dim: rgba(255,255,255,0.35);
    --card-bg: rgba(255,255,255,0.06);
    --card-border: rgba(255,255,255,0.1);
    --card-blur: blur(20px);
    --input-bg: rgba(255,255,255,0.06);
    --input-border: rgba(255,255,255,0.1);
    --input-focus: rgba(78,157,166,0.4);
    --frame-shadow: 0 0 0 2px rgba(255,255,255,0.08), 0 40px 80px rgba(0,0,0,0.6), 0 0 120px rgba(139,92,246,0.15);
    --frame-border: none;
    --icon-radius: 14px;
    --qr-bg: #ffffff;
    --qr-shadow: 0 0 40px rgba(139,92,246,0.15), 0 0 20px rgba(255,255,255,0.08);
    --success-bg: rgba(80,180,80,0.15);
    --success-color: #6BBF6B;
    --danger-color: #E07B7B;
    --danger-bg: rgba(236,72,153,0.15);
    --segment-bg: rgba(255,255,255,0.06);
    --segment-active: rgba(255,255,255,0.14);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    background: var(--body-bg);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    font-family: 'Plus Jakarta Sans', -apple-system, sans-serif;
    color: var(--text-primary);
    transition: background 0.4s ease;
  }

  .phone-frame {
    width: 390px;
    height: 844px;
    background: var(--screen-bg);
    border-radius: 44px;
    overflow: hidden;
    position: relative;
    border: var(--frame-border);
    box-shadow: var(--frame-shadow);
    transition: background 0.4s ease, border-color 0.3s ease, box-shadow 0.4s ease;
  }

  .screen {
    height: 100%;
    overflow: hidden;
    background-color: var(--screen-bg);
    background-image: var(--screen-gradient);
    transition: background 0.4s ease;
    display: flex;
    flex-direction: column;
  }

  /* ===== Status Bar ===== */
  .status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 28px 8px;
    flex-shrink: 0;
  }
  .status-time { font-size: 15px; font-weight: 700; letter-spacing: 0.5px; }
  .status-icons { display: flex; align-items: center; gap: 6px; }
  .status-icons svg { width: 16px; height: 16px; fill: white; }
  .theme-toggle {
    width: 20px; height: 20px; background: transparent; border: none;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    opacity: 0.5; padding: 0; margin: 0 6px; transition: opacity 0.2s ease;
  }
  .theme-toggle:hover { opacity: 0.85; }
  .theme-toggle svg { width: 16px; height: 16px; fill: white; }

  /* ===== Nav Header ===== */
  .nav-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 24px 12px;
    flex-shrink: 0;
  }
  .nav-back {
    display: flex;
    align-items: center;
    gap: 6px;
    background: none;
    border: none;
    color: var(--teal);
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    font-family: inherit;
    text-decoration: none;
  }
  .nav-back svg { width: 20px; height: 20px; fill: var(--teal); }
  .nav-title {
    font-size: 17px;
    font-weight: 700;
    color: var(--text-primary);
  }
  .nav-spacer { width: 70px; }

  /* ===== Segmented Control ===== */
  .segment-control {
    display: flex;
    margin: 0 24px 16px;
    background: var(--segment-bg);
    border-radius: 12px;
    padding: 3px;
    flex-shrink: 0;
    border: 1px solid var(--surface-border);
  }
  .segment-btn {
    flex: 1;
    padding: 10px 0;
    border: none;
    border-radius: 10px;
    background: transparent;
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.25s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .segment-btn.active {
    background: var(--segment-active);
    color: var(--text-primary);
    box-shadow: 0 1px 4px rgba(0,0,0,0.15);
  }
  .segment-btn svg { width: 16px; height: 16px; fill: currentColor; }
  .segment-badge {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--teal);
    color: white;
    font-size: 11px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* ===== Tab Content ===== */
  .tab-content {
    flex: 1;
    display: none;
    flex-direction: column;
    min-height: 0;
  }
  .tab-content.active {
    display: flex;
  }

  /* ===== Members Tab ===== */
  .members-list {
    padding: 0 20px;
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0;
  }
  .member-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 10px;
    backdrop-filter: var(--card-blur);
    -webkit-backdrop-filter: var(--card-blur);
    transition: all 0.3s ease;
  }
  .member-card-avatar {
    width: 44px;
    height: 44px;
    border-radius: var(--icon-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 700;
    color: white;
    flex-shrink: 0;
    transition: border-radius 0.3s ease;
  }
  .member-card-avatar.green { background: #6BBF6B; }
  .member-card-avatar.blue { background: #5B8DEF; }
  .member-card-avatar.purple { background: #A855F7; }
  .member-card-info { flex: 1; min-width: 0; }
  .member-card-name {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-primary);
  }
  .member-card-role {
    font-size: 12px;
    font-weight: 500;
    color: var(--text-dim);
    margin-top: 1px;
  }
  .member-card-role.admin { color: var(--teal); }
  .member-remove-btn {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    background: var(--danger-bg);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
  }
  .member-remove-btn:hover { background: rgba(224,123,123,0.2); }
  .member-remove-btn:active { transform: scale(0.92); }
  .member-remove-btn svg { width: 16px; height: 16px; fill: var(--danger-color); }

  /* Invite CTA at bottom of members tab */
  .invite-cta {
    margin: auto 20px 50px;
    padding: 16px;
    border-radius: 16px;
    background: rgba(78,157,166,0.08);
    border: 1px solid rgba(78,157,166,0.15);
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .invite-cta:hover { background: rgba(78,157,166,0.12); }
  .invite-cta:active { transform: scale(0.98); }
  .invite-cta-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(78,157,166,0.15);
    margin: 0 auto 10px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .invite-cta-icon svg { width: 22px; height: 22px; fill: var(--teal); }
  .invite-cta-title {
    font-size: 15px;
    font-weight: 600;
    color: var(--teal);
    margin-bottom: 4px;
  }
  .invite-cta-desc {
    font-size: 12px;
    color: var(--text-dim);
    font-weight: 500;
  }

  /* ===== Invite Tab ===== */
  .invite-tab {
    padding: 0 24px;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .qr-section {
    text-align: center;
    padding: 12px 0 16px;
    flex-shrink: 0;
  }
  .qr-container {
    width: 160px;
    height: 160px;
    background: var(--qr-bg);
    border-radius: 20px;
    margin: 0 auto 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--qr-shadow);
  }
  .qr-pattern {
    width: 120px;
    height: 120px;
    display: grid;
    grid-template-columns: repeat(11, 1fr);
    grid-template-rows: repeat(11, 1fr);
    gap: 1px;
  }
  .qr-cell { border-radius: 1.5px; }
  .qr-cell.dark { background: #1a1a2e; }
  .qr-cell.light { background: transparent; }
  .qr-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 3px;
  }
  .qr-hint {
    font-size: 12px;
    color: var(--text-dim);
    font-weight: 500;
  }

  /* Link Field */
  .link-section {
    padding: 0 0 14px;
    flex-shrink: 0;
  }
  .link-field {
    display: flex;
    align-items: center;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    border-radius: 14px;
    overflow: hidden;
  }
  .link-text {
    flex: 1;
    padding: 12px 14px;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    font-family: 'Plus Jakarta Sans', monospace;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    user-select: all;
  }
  .link-copy {
    width: 48px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--surface);
    border: none;
    border-left: 1px solid var(--input-border);
    cursor: pointer;
    transition: background 0.2s ease;
    flex-shrink: 0;
  }
  .link-copy:hover { background: var(--surface-hover); }
  .link-copy:active { transform: scale(0.95); }
  .link-copy svg { width: 18px; height: 18px; fill: var(--teal); }
  .link-copy.copied svg { fill: var(--success-color); }
  .link-validity {
    text-align: center;
    font-size: 11px;
    color: var(--text-dim);
    font-weight: 500;
    margin-top: 8px;
  }

  /* Share Buttons */
  .share-section {
    flex-shrink: 0;
    margin-top: auto;
    padding-bottom: 50px;
  }
  .share-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }
  .share-button {
    width: 100%;
    padding: 14px 18px;
    border-radius: 14px;
    border: 1px solid var(--surface-border);
    background: var(--surface);
    color: var(--text-primary);
    font-size: 14px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
    backdrop-filter: var(--card-blur);
    -webkit-backdrop-filter: var(--card-blur);
  }
  .share-button:hover { background: var(--surface-hover); }
  .share-button:active { transform: scale(0.98); }
  .share-button svg { width: 20px; height: 20px; flex-shrink: 0; }
  .share-button .btn-desc {
    font-size: 12px;
    font-weight: 500;
    color: var(--text-dim);
    margin-left: auto;
  }
  .share-button.whatsapp svg { fill: #25D366; }
  .share-button.email svg { fill: var(--orange); }

  /* ===== Confirm Dialog ===== */
  .dialog-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 100;
    padding: 24px;
  }
  .dialog-overlay.show { display: flex; }
  .dialog-box {
    background: var(--screen-bg);
    border: 1px solid var(--card-border);
    border-radius: 20px;
    padding: 24px;
    width: 100%;
    max-width: 320px;
    text-align: center;
    backdrop-filter: var(--card-blur);
    -webkit-backdrop-filter: var(--card-blur);
  }
  .dialog-title { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
  .dialog-message { font-size: 14px; color: var(--text-secondary); margin-bottom: 20px; line-height: 1.5; }
  .dialog-actions { display: flex; gap: 10px; }
  .dialog-btn {
    flex: 1;
    padding: 12px;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    border: none;
    transition: transform 0.1s ease;
  }
  .dialog-btn:active { transform: scale(0.97); }
  .dialog-btn.cancel { background: var(--surface); color: var(--text-primary); }
  .dialog-btn.danger { background: var(--danger-color); color: white; }

  /* ===== Toast ===== */
  .toast {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--success-bg);
    border: 1px solid rgba(107,191,107,0.2);
    color: var(--success-color);
    padding: 12px 24px;
    border-radius: 14px;
    font-size: 14px;
    font-weight: 600;
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
    z-index: 200;
    white-space: nowrap;
  }
  .toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
</style>
</head>
<body>

<div class="phone-frame">
  <div class="screen">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-time">9:41</div>
      <div class="status-icons">
        <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle theme"></button>
        <svg viewBox="0 0 16 16"><path d="M1.5 4.5C4 2 7.5 1 8 1s4 1 6.5 3.5l-1.2 1.2C11.2 3.6 9 2.5 8 2.5S4.8 3.6 2.7 5.7L1.5 4.5zM4 7.3C5.3 6 6.8 5.2 8 5.2s2.7.8 4 2.1L10.8 8.5C9.8 7.5 9 7 8 7s-1.8.5-2.8 1.5L4 7.3zM6.5 10c.8-.8 1.2-1 1.5-1s.7.2 1.5 1L8 11.5 6.5 10z"/></svg>
        <svg viewBox="0 0 16 16"><path d="M1 4h2v8H1V4zm3.5 2h2v6h-2V6zM8 3h2v9H8V3zm3.5 1h2v8h-2V4z"/></svg>
        <svg viewBox="0 0 24 14"><rect x="0.5" y="0.5" width="20" height="13" rx="2.5" stroke="white" stroke-opacity="0.35" fill="none"/><path opacity="0.4" d="M22 5v4a2 2 0 000-4z" fill="white"/><rect x="2" y="2" width="15" height="9" rx="1.5" fill="white"/></svg>
      </div>
    </div>

    <!-- Nav Header -->
    <div class="nav-header">
      <a class="nav-back" href="lists.html">
        <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
        Zur√ºck
      </a>
      <div class="nav-title">Mitglieder</div>
      <div class="nav-spacer"></div>
    </div>

    <!-- Segmented Control -->
    <div class="segment-control">
      <button class="segment-btn active" id="segMembers" onclick="switchTab('members')">
        <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
        Mitglieder
        <span class="segment-badge">3</span>
      </button>
      <button class="segment-btn" id="segInvite" onclick="switchTab('invite')">
        <svg viewBox="0 0 24 24"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        Einladen
      </button>
    </div>

    <!-- Tab: Mitglieder -->
    <div class="tab-content active" id="tabMembers">
      <div class="members-list">
        <!-- Sarah (Admin/Self) -->
        <div class="member-card" data-member="sarah">
          <div class="member-card-avatar green">S</div>
          <div class="member-card-info">
            <div class="member-card-name">Sarah</div>
            <div class="member-card-role admin">Admin &middot; Du</div>
          </div>
        </div>

        <!-- Tom -->
        <div class="member-card" data-member="tom" id="cardTom">
          <div class="member-card-avatar blue">T</div>
          <div class="member-card-info">
            <div class="member-card-name">Tom</div>
            <div class="member-card-role">Mitglied</div>
          </div>
          <button class="member-remove-btn" onclick="confirmRemove('Tom')">
            <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
          </button>
        </div>

        <!-- Lena -->
        <div class="member-card" data-member="lena" id="cardLena">
          <div class="member-card-avatar purple">L</div>
          <div class="member-card-info">
            <div class="member-card-name">Lena</div>
            <div class="member-card-role">Mitglied</div>
          </div>
          <button class="member-remove-btn" onclick="confirmRemove('Lena')">
            <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
          </button>
        </div>
      </div>

      <!-- CTA to switch to invite tab -->
      <div class="invite-cta" onclick="switchTab('invite')">
        <div class="invite-cta-icon">
          <svg viewBox="0 0 24 24"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        </div>
        <div class="invite-cta-title">Neues Mitglied einladen</div>
        <div class="invite-cta-desc">Per QR-Code, Link, WhatsApp oder E-Mail</div>
      </div>
    </div>

    <!-- Tab: Einladen -->
    <div class="tab-content" id="tabInvite">
      <div class="invite-tab">
        <!-- QR Code -->
        <div class="qr-section">
          <div class="qr-container" id="qrContainer"></div>
          <div class="qr-label">QR-Code scannen</div>
          <div class="qr-hint">oder Einladungslink teilen</div>
        </div>

        <!-- Link Field -->
        <div class="link-section">
          <div class="link-field">
            <div class="link-text">shopzebra.app/j/Ax9fK2m</div>
            <button class="link-copy" id="copyBtn" onclick="copyLink()">
              <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
            </button>
          </div>
          <div class="link-validity">Link g&uuml;ltig f&uuml;r 7 Tage</div>
        </div>

        <!-- Share Buttons -->
        <div class="share-section">
          <div class="share-label">Einladung senden</div>
          <button class="share-button whatsapp" onclick="shareWhatsApp()">
            <svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
            Per WhatsApp
            <span class="btn-desc">Direkt senden</span>
          </button>
          <button class="share-button email" onclick="shareEmail()">
            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            Per E-Mail
            <span class="btn-desc">Einladungstext</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Remove Confirmation Dialog -->
  <div class="dialog-overlay" id="removeDialog">
    <div class="dialog-box">
      <div class="dialog-title"><span id="removeName"></span> entfernen?</div>
      <div class="dialog-message"><span id="removeNameMsg"></span> hat dann keinen Zugriff mehr auf diese Einkaufsliste.</div>
      <div class="dialog-actions">
        <button class="dialog-btn cancel" onclick="hideRemoveDialog()">Abbrechen</button>
        <button class="dialog-btn danger" onclick="executeRemove()">Entfernen</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>
</div>

<script>
  // ===== Theme =====
  var MOON_SVG = '<svg viewBox="0 0 24 24" fill="white"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>';
  var SUN_SVG = '<svg viewBox="0 0 24 24" fill="white"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"/></svg>';
  function getTheme() { return localStorage.getItem('shopzebra_theme') || 'dark'; }
  function applyTheme(t) {
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('shopzebra_theme', t);
    document.getElementById('themeToggle').innerHTML = t === 'dark' ? MOON_SVG : SUN_SVG;
  }
  function toggleTheme() { applyTheme(getTheme() === 'dark' ? 'glass' : 'dark'); }
  applyTheme(getTheme());

  // ===== Tab Switching =====
  function switchTab(tab) {
    var tabMembers = document.getElementById('tabMembers');
    var tabInvite = document.getElementById('tabInvite');
    var segMembers = document.getElementById('segMembers');
    var segInvite = document.getElementById('segInvite');

    if (tab === 'members') {
      tabMembers.classList.add('active');
      tabInvite.classList.remove('active');
      segMembers.classList.add('active');
      segInvite.classList.remove('active');
    } else {
      tabInvite.classList.add('active');
      tabMembers.classList.remove('active');
      segInvite.classList.add('active');
      segMembers.classList.remove('active');
    }
  }

  // ===== Fake QR Code =====
  function generateQR() {
    var container = document.getElementById('qrContainer');
    var grid = document.createElement('div');
    grid.className = 'qr-pattern';
    var pattern = [
      1,1,1,1,1,1,1,0,1,0,1,
      1,0,0,0,0,0,1,0,0,1,0,
      1,0,1,1,1,0,1,0,1,0,1,
      1,0,1,1,1,0,1,0,0,1,1,
      1,0,1,1,1,0,1,0,1,1,0,
      1,0,0,0,0,0,1,0,0,0,1,
      1,1,1,1,1,1,1,0,1,0,1,
      0,0,0,0,0,0,0,0,1,1,0,
      1,0,1,1,0,1,1,1,0,0,1,
      0,1,0,0,1,0,0,1,1,0,1,
      1,1,1,0,1,1,1,0,1,1,1
    ];
    for (var i = 0; i < pattern.length; i++) {
      var cell = document.createElement('div');
      cell.className = 'qr-cell ' + (pattern[i] ? 'dark' : 'light');
      grid.appendChild(cell);
    }
    container.appendChild(grid);
  }
  generateQR();

  // ===== Remove Member =====
  var pendingRemoveName = '';
  function confirmRemove(name) {
    pendingRemoveName = name;
    document.getElementById('removeName').textContent = name;
    document.getElementById('removeNameMsg').textContent = name;
    document.getElementById('removeDialog').classList.add('show');
  }
  function hideRemoveDialog() {
    document.getElementById('removeDialog').classList.remove('show');
    pendingRemoveName = '';
  }
  function executeRemove() {
    hideRemoveDialog();
    var cardId = 'card' + pendingRemoveName;
    var card = document.getElementById(cardId);
    if (card) {
      card.style.transition = 'opacity 0.3s ease, transform 0.3s ease, max-height 0.3s ease';
      card.style.opacity = '0';
      card.style.transform = 'translateX(60px)';
      card.style.maxHeight = '0';
      card.style.marginBottom = '0';
      card.style.padding = '0 16px';
      card.style.overflow = 'hidden';
      setTimeout(function() { card.remove(); }, 350);
    }
    // Update badge count
    var badge = document.querySelector('.segment-badge');
    var current = parseInt(badge.textContent);
    badge.textContent = current - 1;

    showToast(pendingRemoveName + ' wurde entfernt');
  }

  // ===== Copy Link =====
  var INVITE_LINK = 'https://shopzebra.app/j/Ax9fK2m';
  function copyLink() {
    var btn = document.getElementById('copyBtn');
    if (navigator.clipboard) {
      navigator.clipboard.writeText(INVITE_LINK);
    }
    btn.classList.add('copied');
    btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="#6BBF6B"/></svg>';
    showToast('Link kopiert');
    setTimeout(function() {
      btn.classList.remove('copied');
      btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" fill="#4E9DA6"/></svg>';
    }, 2000);
  }

  // ===== Share =====
  function shareWhatsApp() { showToast('WhatsApp wird ge\u00F6ffnet...'); }
  function shareEmail() { showToast('E-Mail wird ge\u00F6ffnet...'); }

  // ===== Toast =====
  function showToast(msg) {
    var toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(function() { toast.classList.remove('show'); }, 2500);
  }
</script>

</body>
</html>
